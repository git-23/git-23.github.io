# JS 映射与集合

## Map

使用 Map 构造函数创建空映射，创建时可以传入可迭代对象进行初始化。`size`属性表示 Map 中键值对数量

可以使用实例方法`set()`向映射中添加键值对，方法接收两个参数。由于`set()`方法返回映射实例，可以将多个 set 操作连接使用。可以使用`set()`和`has()`方法对映射进行查询。`delete()`和`clear()`方法删除映射中的键值对

不同于对象，映射可以采用任意数据类型作为键。Map 内部使用 SameValueZero 检查键的匹配，类似全等操作符，但存在一些不同。例如，`NaN`与`NaN`被视作相等，`+0`与`-0`被视作相等

不同于对象，Map 实例维护键值对的插入顺序，提供一个迭代器，可以通过`entries()`方法或`[Symbol.iterator]`属性取得这个迭代器。`keys()`和`values()`分别返回关于键和值的迭代器

`forEach()`方法中接收的函数有 val, key 两个参数

映射的内存占用，插入查找性能好于对象。在一些情况下，对象的查找优于映射

## WeakMap

弱映射的键只能是对象，弱映射不会阻止对键的垃圾回收。弱映射没有`clear()`和迭代方法

可以把弱映射放在闭包中存放私有变量，也可以存储 DOM 节点的数据

## Set

使用 Set 构造函数创建新集合，可以传入可迭代对象进行初始化

`add()`方法向集合中添加元素，`has()`方法对元素进行查询，`delete()`和`clear()`方法删除集合中的元素

可以使用`values()`, `keys()`方法或`[Symbol.iterator]`属性返回迭代器。`entries()`方法中 key 与 value 相等

## WeakSet

弱集合的值只能是对象，不会阻止对值的垃圾回收。弱集合没有迭代方法

可以使用弱集合给对象打标签